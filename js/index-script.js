"use strict";const body=document.body,HTML=document.documentElement,listenerBaseOption={capture:!1,once:!1,passive:!0},defineDocFontSize=()=>parseFloat(getComputedStyle(document.documentElement).fontSize);function setupLoadingState(){const t={capture:!0,once:!0};document.addEventListener("DOMContentLoaded",(()=>{HTML.classList.add("DOMLoaded"),HTML.classList.remove("lock"),HTML.classList.remove("fixLock"),setTimeout((()=>{}),1)}),t),window.addEventListener("load",(()=>{HTML.classList.add("loaded"),function(){const t=document.getElementById("preloader");setTimeout((()=>t.remove()),700)}()}),t)}setupLoadingState();const portfolioTiltEffect={maxTilt:10,maxShadowOffset:20,maxBlur:40,_d:{},controller:new AbortController,signal:null,init(){this.signal||(this.signal=this.controller.signal,body.addEventListener("mouseover",(t=>this.start(t)),{...listenerBaseOption,signal:this.signal}))},start(t){t.target.closest(".portfolio__item")&&(this.controller.abort(),this._d.preview=t.target.closest(".portfolio__item"),this._d.preview.style.transition="transform 0.3s ease-out, box-shadow 0.3s ease-out, opacity 0.3s",this._d.preview.style.setProperty("--before-opacity","0"),this._d.preview.style.setProperty("--after-opacity","1"),this._d.newShadowColor=this.decideShadow(this._d.preview),this._d.docFontSize=parseFloat(getComputedStyle(document.documentElement).fontSize),this.controller=new AbortController,this.signal=this.controller.signal,this._d.preview.addEventListener("mousemove",(t=>this.movet(t)),{...listenerBaseOption,signal:this.signal}),this._d.preview.addEventListener("mouseleave",(()=>this.end()),{once:!0,passive:!0,signal:this.signal}))},movet(t){const e=this._d.preview.getBoundingClientRect(),i=e.left+e.width/2,o=e.top+e.height/2,s=(t.clientX-i)/(e.width/2),r=(t.clientY-o)/(e.height/2),n=-r*this.maxTilt,a=s*this.maxTilt,d=-s*this.maxShadowOffset,l=-r*this.maxShadowOffset,h=(Math.abs(s)+Math.abs(r))/2*this.maxBlur,c=(s+1)/2*100,m=(r+1)/2*100;this._d.preview.style.transform=`\n\t\trotateX(${n.toFixed(2)}deg)\n\t\trotateY(${a.toFixed(2)}deg)\n\t\tscale3d(1.03,1.03,1.03)\n\t\t`,this._d.preview.style.boxShadow=`\n\t\t${(d/this._d.docFontSize).toFixed(2)}rem \n\t\t${(l/this._d.docFontSize).toFixed(2)}rem \n\t\t${(h/this._d.docFontSize).toFixed(2)}rem \n\t\t${this._d.newShadowColor}\n\t\t`,this._d.preview.style.setProperty("--pos-x",`${c}%`),this._d.preview.style.setProperty("--pos-y",`${m}%`)},end(t=!0){this.controller.abort(),this._d.preview.style.removeProperty("transition"),this._d.preview.style.removeProperty("transform"),this._d.preview.style.removeProperty("box-shadow"),this._d.preview.style.removeProperty("--before-opacity"),this._d.preview.style.removeProperty("--after-opacity"),this._d={},t&&(this.controller=new AbortController,this.signal=this.controller.signal,body.addEventListener("mouseover",(t=>this.start(t)),{...listenerBaseOption,signal:this.signal}))},destroy(){Object.keys(this._d).length&&this.end(!1),this.controller.abort(),this.controller=new AbortController,this.signal=null},decideShadow(t){const e=window.getComputedStyle(t).boxShadow.match(/(rgba?\([^)]+\))/),i=e?e[1]:null;return i?function(t,e=.1){const i=t.match(/rgba\(\s*(\d+),\s*(\d+),\s*(\d+),\s*([0-9.]+)\s*\)/);if(i){let[t,o,s,r,n]=i;return`rgba(${o}, ${s}, ${r}, ${Math.min(1,parseFloat(n)+e)})`}return t}(i,.1):"rgba(0, 0, 0, 0.4)"}},mediaHoverWatcher={isMediaHover:window.matchMedia("(any-hover: hover)"),_listener:null,init(){this._listener||(this._listener=this.checker.bind(this),this.isMediaHover.addEventListener("change",this._listener),this.checker())},checker(){void 0!==portfolioTiltEffect&&(this.isMediaHover.matches?portfolioTiltEffect.init():portfolioTiltEffect.destroy?.())},destroy(){this._listener&&(this.isMediaHover.removeEventListener("change",this._listener),this._listener=null)}};mediaHoverWatcher.init();